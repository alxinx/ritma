include ../layout/head.pug
include ../components/mixins/form-field.pug
block contenedor


    // ================================================
    // NAVBAR
    // ================================================
//include ./navBar.pug
div(class="flex min-h-screen ")
    
    //-MENU LATERAL
    include layout/leftMenu.pug
    main(class="flex-1 lg:ml-72 min-h-screen")
        // HEADER 
        
        
        include layout/headerAdmin.pug

        //BODY
        div(class="mx-auto p-4 pb-32")  

            //UPLOAD FORM
            section(class="max-w-5xl mx-auto space-y-8") 

                div(class="glass-card rounded-3xl relative overflow-visible")

                  nav(class="flex border-b border-white/10 bg-black/20")
                    a(id="single" class="tab-btn  inactive cursor-pointer")
                        span(class="material-symbols-outlined text-sm mr-3 ")  file_open
                        | Solo un archivo
                    a(id="multiple" class="tab-btn active cursor-pointer")
                        span(class="material-symbols-outlined text-sm mr-3") library_music
                        | Varios Archivos
                      

                  div(class="p-10 relative overflow-hidden")
                    

                    div(class="space-y-10 relative z-10")
                      input(type="hidden", id="idArtista" name="idArtista")
                      div(class="grid grid-cols-1 md:grid-cols-3 gap-8 pb-10 border-b border-white/5")
                        div(class="space-y-2")
                            +ritmaInput("nombreArtista", "nombreArtista", "text", "Nombre Artista o Grupo", true, "Grupo Super Cool", "artist")
                            #sugerencias-artista(class="absolute z-50 w-full bg-black border border-white/10 hidden")
                        
                        
                        div(class="space-y-2")
                          input(type="hidden" name="idAlbum" class="idAlbum-js")  
                          +ritmaInput("nombreAlbum", "nombreAlbum", "text", "Titulo del album", true, "Ej: Mañana será bonito", "album") (class="")
                          div(class="sugerencias-album-js hidden absolute z-50 w-full bg-black/95 border border-white/10 rounded-xl mt-1 overflow-hidden shadow-2xl")
                        
                        
                        
                        div(class="space-y-2")
                          label(class="text-[10px] font-mono font-bold text-primary uppercase tracking-widest block ml-1") Caratula del Album
                          div(class="flex items-center gap-4")
                            +fileUploadMini("coverAlbum", "coverAlbum", true, "Subir Cover")


                      div(class="space-y-6")
                        div(class="flex items-center justify-between")
                         h3(class="text-sm font-accent font-extrabold uppercase tracking-wider") Archivos por subir
                         p(class="text-[10px] font-mono text-gray-500") TOTAL ITEMS: 
                         div(class="flex gap-2")
                            span(class="total-items-count text-primary") 1

                        div(class="space-y-3")

                            //- Contenedor principal de las filas
                            div(id="contenedor-filas" class="space-y-4 mb-6")
                                //- Fila Inicial (01)
                                div(class="fila-archivo grid grid-cols-12 gap-4 items-end bg-white/5 p-4 rounded-2xl border border-white/5" data-index="1")
                                    div(class="col-span-1 flex items-center justify-center pb-3")
                                        span(class="numero-fila text-[10px] font-mono text-primary font-bold") 01

                                    div(class="col-span-4 space-y-2")
                                        +ritmaInput("titulo-1", "titulo[]", "text", "¿Cómo se llama la obra?", true, "Nombre del disco", "music_note")

                                    div(class="col-span-2 space-y-2")
                                        +ritmaInput("costo-1", "costoCreditos[]", "number", "Valor en Créditos", true, "10", "database")

                                    div(class="col-span-2 space-y-2 flex items-center justify-center pt-3")
                                        +ritmaSwitch("sw-1", "es_video[]", "Video", false)

                                    div(class="col-span-2 space-y-2 flex items-center justify-center pt-3")
                                        +fileUploadMini("file-1", "archivo[]", true, "Subir Archivo")

                                    div(class="col-span-1 flex items-center justify-center pb-3")
                                        //- Botón eliminar (oculto en la primera fila o funcional)
                                        button(type="button" class="btn-eliminar-js text-primary hover:text-red-500 transition-colors")
                                            span(class="material-symbols-outlined") delete

                            //- Botón para agregar
                            div(class="w-full")
                                button(type="button" id="btn-agregar-fila" class="w-full py-4 bg-primary text-black font-bold uppercase tracking-widest flex items-center justify-center gap-2 hover:brightness-110 transition-all")
                                    span(class="material-symbols-outlined") add
                                    | Agregar Mas Archivos


                            

                            //- +btnSubmit("add", "add", "Agregar Mas Archivos", "add")

                      div(class="grid grid-cols-1 md:grid-cols-2 gap-10")
                        div(class="space-y-4")
                          label(class="text-[10px] font-mono font-bold text-primary uppercase tracking-widest block ml-1") Selecciona los generos al que pertenece
                          a(class="category-select" id="btn-abrir-generos")
                            span(class="text-[10px] font-bold uppercase tracking-widest text-gray-400 group-hover:text-white") Seleccione los generos adecuados para el multimedia. 
                            span(class="material-symbols-outlined text-primary") shelves
                          input(type="hidden" name="generosSeleccionados" id="generosSeleccionados")
                          div(id="contenedor-pills-generos" class="flex flex-wrap gap-2")
                            
                              
                           



    
                        div(id="modal-generos" class="fixed inset-0 z-[3000] flex items-center justify-center bg-black/80 hidden")
                            div(class="glass-card  w-full max-w-2xl p-8 rounded-3xl border border-white/10")
                                //h2(class="text-primary font-accent font-extrabold uppercase tracking-widest mb-6") Seleccionar Géneros
                                h3.text-primary.tracking-widest.font-display.text-center.mb-4 Selecciona los géneros
                                
                                //- NUEVO: Buscador de géneros
                                div(class="relative mb-6")
                                    +ritmaInput("busqueda-genero-modal", "busqueda-genero-modal", "text", "", true, "BUSCAR GÉNERO...", "search")
                                
                                
                                div(id="lista-generos-modal" class="grid grid-cols-2 md:grid-cols-3 gap-3 max-h-96 overflow-y-auto p-2 custom-scrollbar")
                                div(class="flex justify-end gap-4 mt-8")
                                    button(type="button" id="btn-cerrar-modal" class="px-6 py-2 text-xs font-bold uppercase text-gray-400 hover:text-white") Cancelar
                                    button(type="button" id="btn-aceptar-generos" class="px-6 py-2 bg-primary text-black text-xs font-bold uppercase rounded-lg hover:brightness-110") Aceptar




                        div(class="flex flex-col justify-end gap-4")
                          div(class="p-4 glass-card rounded-2xl border-white/5 bg-white/2 flex items-center justify-between")
                            div(class="space-y-1")
                              p(class="text-[10px] font-bold text-white uppercase tracking-wider leading-none") Metadata Extraction
                              p(class="text-[8px] font-mono text-gray-500") ID3_TAGS_PARSER_ON
                            label(class="relative inline-flex items-center cursor-pointer")
                              input(class="sr-only peer" type="checkbox" checked)
                              div(class="w-9 h-5 bg-white/10 rounded-full peer-checked:bg-primary after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-black after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full")
                          button(class="w-full bg-primary py-4 rounded-xl text-black font-accent font-extrabold uppercase tracking-widest text-sm shadow-lg shadow-primary/20 hover:scale-[1.01] transition-transform")
                            | Initialize Bulk Upload

                  div(class="group mt-6")
                    div(class="w-full h-48 border-2 border-dashed border-primary/20 rounded-3xl flex flex-col items-center justify-center gap-4 group-hover:border-primary/60 group-hover:bg-primary/5 transition-all cursor-pointer relative overflow-hidden")
                      div(class="absolute inset-0 pixel-pattern opacity-5 group-hover:opacity-10")
                      div(class="size-16 rounded-full bg-primary/10 flex items-center justify-center text-primary group-hover:scale-110 transition-transform")
                        span(class="material-symbols-outlined text-4xl") library_music
                      div(class="text-center space-y-1")
                        h4(class="font-accent font-bold uppercase tracking-widest text-sm") Drop Multiple Assets Here
                        p(class="text-[10px] font-mono text-gray-500 uppercase") Batch limit: 50 files / Supported: WAV, MP3, FLAC (MAX 5GB Total)

        script(src="/js/multimediaPanels.js") 




                    

          
           

           
                

        include layout/footer.pug 


            

                        



            

                
        //FOOTER
    
    script(src="/js/controlPanel.js") 

    // ================================================
    // footer
